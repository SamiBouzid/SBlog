import{_ as b}from"./Footer.9653fa1c.js";import{_ as g}from"./Research.1cad92f6.js";import{u as H,s as w,_ as C}from"./useHeadSeo.bc787786.js";import{f as N,w as T,j as W,p as $,u as n,o as k,g as A,h as B,i as P,a as v,b as V}from"./entry.c719358d.js";import{b as G}from"./usePageTransition.37641a65.js";import{u as j}from"./useErrorPage.9cc7120a.js";import"./indexComponents.6452e6dc.js";import"./Listing.51d73026.js";import"./useResourceIndexData.f4ec2f91.js";import"./usePageLoading.b926b995.js";import"./lang.4a9029fb.js";const D={class:"container"},Q={__name:"index",async setup(E){var p,_,h,d;let a,u;const{$api:c,$twill:l}=N(),{data:e,error:m}=([a,u]=T(()=>G("research-index",()=>Promise.all([c.topicsWhereHas("research-publications"),c.modelsWhereHas("research-publications"),c.contentTypesWhereHas("research-publications"),c.authorsWhereHas("author-groups"),l.find("research-indices").fetch()]),{transform:([r,o,t,s,i])=>({topics:r,models:o,contentTypes:t,authors:s,resource:l.transform(i).pop()})})),a=await a,u(),a);j({data:e,error:m}),H({title:(_=(p=e.value)==null?void 0:p.resource)==null?void 0:_.title,seo:(d=(h=e.value)==null?void 0:h.resource)==null?void 0:d.seo}),W(()=>{w(e.value.resource)});const y=$(()=>{var r,o,t,s;return{topics:(r=e.value)==null?void 0:r.topics,models:(o=e.value)==null?void 0:o.models,contentTypes:(t=e.value)==null?void 0:t.contentTypes,authors:(s=e.value)==null?void 0:s.authors}});return(r,o)=>{const t=b,s=g,i=C;return n(m)?P("",!0):(k(),A(i,{key:0,class:"theme-light-gray",id:"research-index"},{default:B(()=>{var f,x;return[v(t,{name:"Generic",title:(f=n(e).resource)==null?void 0:f.title,theme:(x=n(e).resource)==null?void 0:x.colorTheme},null,8,["title","theme"]),V("div",D,[v(s,{filters:n(y)},null,8,["filters"])])]}),_:1}))}}};export{Q as default};
