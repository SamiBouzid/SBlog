<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Portfolio Optimization Markowitz</title>
        <link rel="stylesheet" type="text/css" href="../css/article-style.css">
        <link rel="shortcut icon" href="../media/Images/logo/favicon/favicon5.ico" type="image/x-icon">
        <link rel="icon" type="image/png" sizes="16x16" href="../media/Images/logo/favicon/favicon5-16x16.png">
        <link rel="icon" type="image/png" sizes="32x32" href="../media/Images/logo/favicon/favicon5-32x32.png">
        <!--STYLE-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="../prism/prism.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300&family=Literata:wght@300&display=swap" rel="stylesheet">
    </head>
    
    <body>

        <!--HEADER-->
        <header class="header" id="header">
            <div class="header-content">
            <!--NAVIGATION PAN -->
            <!--logo-->
            <div class="logo-container">
                <div class="header-logo">
                    <a href="../index.html">
                    <img src="../media/Images/logo/t5.png" class="logo" alt="SBlog Logo" id="logo1">
                    </a>
                </div>
                    <a href="../index.html">
                    <img src="../media/Images/logo/t4.png" class="logo" alt="SBLOG Logo" id="logo2" style="opacity: 0;">
                    </a>
            </div>
            <!--list-->
            <div id="wrap">
                <ul class="nav">
                    <li> <a class="has-submenu" href ="#"> <span class="link-text">Research & Insights</span> </a>
                        <ul class ="submenu">
                            <li> <a href="#">Macroeconomics Trends</a></li>
                            <li> <a href="#">Market Trends</a></li>
                            <li> <a href="#">Industry Developments</a></li>
                            <li> <a href="#">Political Events</a></li>
                            <li> <a href="#">Theories</a></li>
                        </ul>
                    </li>
                    <li> <a class="has-submenu" href ="#"> <span class="link-text">Algorithmic trading</span> </a>  
                        <ul class ="submenu">
                            <li> <a href="#">Market Neutral</a></li>
                            <li> <a href="#">Machine Learning</a></li>
                            <li> <a href="#">Technical Analysis</a></li>
                            <li> <a href="#">Momentum</a></li>
                            <li> <a href="#">Pairs Trading</a></li>
                            <li> <a href="#">Volatility</a></li>
                        </ul>
                    </li>
                    <li> <a class="has-submenu" href ="#"> <span class="link-text"> Fundamental analysis</span> </a>
                        <ul class ="submenu">
                            <li> <a href="#">Stocks</a></li>
                            <li> <a href="#">Cryptocurrencies</a></li>
                            <li> <a href="#">Industries & Sectors</a></li>
                        </ul>
                    </li>
                    <li> <a class="about" href ="../SamiBouzid.html"> About </a> </li>
                </ul>
            <!--SCROLL TO  BOT FOR SMALL SCREEN-->
            <a href="#footer" class="scroll-to-bottom"> <span class="VM-only-underline">Menu ☰</span> </a>
            </div>
            <!--search-->
            <div class="search">
                <a href="#">Search</a>
            </div>
        </div>
        </header>
        <!--JS FOR HEADER-->
        <script src="../js/header1.js"></script>
        <script src="../js/articles-header2.js"></script>

        <!--ARTICLE-->
        <div class ="article">
        <div class ="intro">
        <h1>Modern Portfolio Theory in Python</h1>
        <div class="intro-sum">By <a href="../SamiBouzid.html"> Sami Bouzid</a> | 7 minute read</div>
        <img src="../media/Images/articles/2-1.png" class="intro-pic" alt="Markowitz">
        </div>

        <!--Transition-->
        <div class="transition">
        <div class="transi-blank"></div>
        <p>Portfolio Optimization using Markowitz Theory</p>
        </div>

        <div class="bgwhite">
        <div class="article-content">
        <!--p article summary-->
        <div class="art-date">April 8, 2023</div>
        <div class="art-right">
        <h3>Top-Down Strategy</h3>
        <ol>
            <li><b>Macroeconomics analysis</b>: Despite the looming risks of a recession or a potential
                 global financial crisis, coupled with high inflation, elevated interest rates, and 
                 rising unemployment, to that added the geopolitical tensions, I remain confident 
                 in taking long positions in stocks as part of a 
                 well-diversified investment strategy.<br><br></li>
            <li><b>Region exposure</b>: 80% in U.S. and European stocks, 20% in the rest of the world. <br><br></li>
            <li><b>Industry exposure</b>: In my article <a class="myart-links" href="top10sectors.html">
                 Top Industries of Tomorrow</a>, I identified 9 potentially interesting sectors. For 
                 this reason, I will allocate 70% of my stocks to the top 5 reliable sectors (Renewable Energies, AI & ML, 
                 Biotech & Pharma, Transportation, IT & Cybersecurity), 20% to promising but riskier 
                 sectors (Space Exploration, Sustainable Agriculture, and Ed Tech & Remote Learning), 
                 and the remaining 10% to the military industry.<br><br></li>
            <li><b>Stock-picking</b>: At this stage, I will not perform fundamental or technical 
                analysis. I will choose stocks based on a single factor: their leading position 
                in the mentioned sectors - determined with Market Cap. I will select 
                50 stocks.
                <br><br></li>
                <li><b>Data collection</b>: ten years of historical data (closing price) for the chosen stocks.<br><br></li>
                <li><b>Financial metrics calculation</b>: Sharpe Ratio, Sortino Ratio, Beta, Volatility, Expected Return.<br><br></li>
                <li><b>Exclusion criteria</b>: Narrowing down stock selection based on financial metrics.<br><br></li>

                <h4 class="title-art-pic">Stocks retained for the portfolio</h4>
                <img src="../media/Images/articles/2-3.png" class="half60-pic" alt="Portfolio Allocation">
                <p class="subtitle-pic">Screenshot of my results after completing all steps 1-7</p>
                <li><b>Diversified Portfolio Construction</b>: Modern Portfolio Theory (MPT).</li>
        </ol>

        <h3>How do I implement Modern Portfolio Theory using Python?</h3>
        <ol>
            <li>Download historical closing prices for the selected 30 stocks and calculate their daily returns.<br><br></li>
            <pre><code class="language-python">
# Define the tickers and date range
tickers = ['ABBV', 'GOOGL', 'AAPL', 'ADP', 'LLY', 'FSLR', 'HAL.NS', 'HON', 'IEL.AX', 'INFY', 'JKS', 'LMT', 'MCD', 'MBG.DE', 'MRK', 'MSFT', 'MBLY', 'MRNA', 'NSRGF', 'NEE', 'NVO', 'NVDA', 'PANW', 'RTX', 'SONY', 'TCS.NS', 'TSLA', 'HO.PA', 'VWS.CO', 'WM']
start_date = "2018-01-01"
end_date = date.today().strftime("%Y-%m-%d")

# Download the historical closing price
closing_prices = pd.DataFrame()
for ticker in tickers:
    data = yf.download(ticker, start=start_date, end=end_date)
    closing_prices[ticker] = data["Adj Close"]

# Calculate daily returns
daily_returns = closing_prices.pct_change()
                </code></pre>
            <li>Generate 10,000 portfolios with random weights, and calculate their Expected Returns, Volatilities, and Sharpe Ratios.<br><br></li>
            <pre><code class="language-python">
# Function to calculate portfolio stats
def portfolio_stats(tickers, weights, daily_returns):
    # Annualized return
    annualized_returns = ((1 + daily_returns.mean()) ** 252) - 1
    
    # Portfolio return
    port_return = np.dot(weights, annualized_returns)

    # Portfolio variance
    cov_matrix = daily_returns.cov() * 252
    port_variance = np.dot(weights.T, np.dot(cov_matrix, weights))

    # Portfolio volatility (standard deviation)
    port_volatility = np.sqrt(port_variance)

    # Portfolio Sharpe ratio
    risk_free_rate = 0.02
    port_sharpe_ratio = (port_return - risk_free_rate) / port_volatility

    return port_return, port_volatility, port_sharpe_ratio

# Generate 10000 random portfolios with different weights
num_portfolios = 10000
all_weights = []
port_returns, port_volatilities, port_sharpe_ratios = [], [], []

min_weight = 0.02

for _ in range(num_portfolios):
    random_weights = np.random.random(len(tickers))
    random_weights = min_weight + (1 - min_weight * len(tickers)) * random_weights / np.sum(random_weights)
    all_weights.append(random_weights)
    ret, vol, sharpe = portfolio_stats(tickers, random_weights, daily_returns)
    port_returns.append(ret)
    port_volatilities.append(vol)
    port_sharpe_ratios.append(sharpe)
            </code></pre>
            <li>Plot the portfolios and highlight the top 10 portfolios with the highest Sharpe Ratio.<br><br></li>
            <h4 class="title-art-pic">Efficient Frontier - Random Portfolios and top 10 Portfolios</h4>
            <img src="../media/Images/articles/2-4.png" class="half90-pic" alt="Efficient Frontier">
            <p class="subtitle-pic">Screenshot of 10,000 randomly generated portfolios visualized using Matplotlib in Python</p>
            <pre><code class="language-python">
# Find the indices of the top10 portfolios with the highest Sharpe ratios
top10_indices = np.argsort(port_sharpe_ratios)[-10:]

# Extract the corresponding weights, returns, volatilities, and Sharpe ratios
top10_weights = [all_weights[i] for i in top10_indices]
top10_returns = [port_returns[i] for i in top10_indices]
top10_volatilities = [port_volatilities[i] for i in top10_indices]
top10_sharpe_ratios = [port_sharpe_ratios[i] for i in top10_indices]

# Plot the random portfolios
plt.figure(figsize=(12, 8))
plt.scatter(port_volatilities, port_returns, c=port_sharpe_ratios, cmap='viridis', marker='o', s=10, alpha=0.7)
plt.colorbar(label='Sharpe Ratio')
plt.xlabel('Volatility')
plt.ylabel('Return')

# Plot the top10 portfolios (excluding the number one portfolio) + Highest sharpe ratio
plt.scatter(np.array(port_volatilities)[top10_indices[:-1]], np.array(port_returns)[top10_indices[:-1]], c='red', marker='o', s=100, alpha=1.0, label='top 10 Portfolios')
plt.scatter(port_volatilities[top10_indices[-1]], port_returns[top10_indices[-1]], c='blue', marker='*', s=200, alpha=1.0, label='Portfolio with the highest Sharpe Ratio')

# Add labels and legend
plt.title('Efficient Frontier - Random Portfolios and top 10 Portfolios')
plt.legend()

# Show the plot
plt.show()
</code></pre>
            
            <li>Extract in an Excel file the weights of the top 10 Portfolios and chose one among them (depending risk-return preference).<br><br></li>
            <h4 class="title-art-pic">Efficient Portfolio that I have chosen</h4>
            <img src="../media/Images/articles/2-5.png" class="half60-pic" alt="Portfolio Weights">
            <p class="subtitle-pic">Optimal Portfolio Weights</p>
        </ol>


        <h3>Bear in Mind the Limitations of MPT</h3>
        <ul class="stylish-list">
            <li>&rsaquo; Portfolio may need to be rebalanced frequently to maintain optimal allocation, 
                which can be costly.</li>
            <li>&rsaquo; Since MPT is based on past performance, it may not accurately predict 
                how assets will perform in the future, especially during periods of significant 
                market changes or economic shifts.</li>
            <li>&rsaquo; MPT assumes that investors are rational and aim to maximize returns while 
                minimizing risks. However, in reality, investor behavior is often influenced by 
                emotions and biases.</li>
        </ul>

        <!--Conclusion-->
        <h3>A bet on Industry Leaders</h3>
        <p class="ccl">By choosing not to perform fundamental or technical analysis, 
            I am simply betting on the success of the top players in each promising industry. 
            My choice is justified by the postulate that all the sectors I have chosen to invest 
            in require significant competitive advantages, entry barriers, considerable 
            technological advancements, revolutionary and ambitious projects (e.g., Tesla's electric semi-trucks, 
            Microsoft's Copilot), and a strong commitment to reliability and data privacy ethics and 
            policies (unfortunately, this last point is often the least respected).</p>

        </div> <!--Right Part-->
        </div> <!--Art-content-->
        </div> <!--Article-->
        </div> <!--White background-->
        

        <!--FOOTER-->
        <footer id="footer">
            <!--logo-->
           <div id = "f-logo-nav">
           <div id="footerlogo">
            <a href="../index.html">
               <img src="../media/Images/logo/t5.png" alt="Logo">
            </a>
           </div>
           <!--list-->
           <div class="footer-right-menu">
               <ul class="footer-menu">
                   <li id="f-biglist"> <a class="f-has-submenu"> Research & Insights </a>
                   <ul class ="f-submenu">
                      <li> <a href="#">Macroeconomics Trends</a></li>
                      <li> <a href="#">Market Trends</a></li>
                      <li> <a href="#">Industry Developments</a></li>
                      <li> <a href="#">Political Events</a></li>
                      <li> <a href="#">Theories</a></li>
                   </ul>
                   </li>
                   <li id="f-biglist"> <a class="f-has-submenu"> Algorithmic trading </a>
                   <ul class ="f-submenu">
                       <li> <a href ="#"> Market Neutral </a></li>
                       <li> <a href="#"> Machine Learning </a></li>
                       <li> <a href="#"> Technical Analysis </a></li>
                       <li> <a href="#"> Momentum </a></li>
                       <li> <a href="#"> Pairs Trading </a></li>
                       <li> <a href="#"> Volatility </a></li>     
                   </ul>
                   </li>
                   <li id="f-biglist"> <a class="f-has-submenu"> Fundamental analysis </a>
                   <ul class ="f-submenu">
                      <li> <a href="#">Stocks</a></li>
                      <li> <a href="#">Cryptocurrencies</a></li>
                      <li> <a href="#">Industries & Sectors</a></li>
                   </ul>
                   </li>
                   <li id="f-biglist"> <a class="f-has-submenu"> About me</a>
                       <ul class ="f-submenu">
                           <li> <a href ="../SamiBouzid.html">Sami Bouzid</a></li>
                           <li> <a href ="https://www.linkedin.com/in/samibouzid/">Linkedin</a></li>
                           <li> <a href ="../contact.html">Contact</a></li>
                       </ul>
                       </li>
                       <li id="f-biglist"> <a class="f-has-submenu"></a>
                        </li>
                   </ul>
               </div>
               </div>
               <div class="footer-bot">
                   <h2><b>SBlog © 2023</b></h2>
                   <a href="#"> <span> Back to top</span> ▴</a>
               </div>
       </footer>
    <script src="../prism/prism.js"></script>
    </body>

</html>